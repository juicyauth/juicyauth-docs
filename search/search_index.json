{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"JuicyAuth - OTP Email Authentication","text":"<p>Welcome to JuicyAuth, your solution for simple and secure OTP-based email authentication. This documentation will guide you through integrating JuicyAuth into both your frontend and backend systems.</p>"},{"location":"#what-is-juicyauth","title":"What is JuicyAuth?","text":"<p>JuicyAuth is an authentication service that allows users to sign in without the need for passwords. Instead, users receive a One-Time Password (OTP) via email, making the authentication process both secure and user-friendly. Our service is ideal for developers looking for a seamless way to authenticate users in their applications.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<p>JuicyAuth operates in two main parts: Client and Backend.</p>"},{"location":"#1-client","title":"1. Client","text":"<p>On the client side, users enter their email address to receive a one-time password (OTP). The process looks like this:</p> <ul> <li>The user enters their email and clicks \"Send OTP\".</li> <li>JuicyAuth sends an OTP to the user's email.</li> <li>The user inputs the OTP to complete the authentication process.</li> </ul>"},{"location":"#2-backend","title":"2. Backend","text":"<p>On the backend side, developers only need to verify the JWT (JSON Web Token) received from the frontend. The process typically involves:</p> <ul> <li>The frontend sends the verified JWT to the backend.</li> <li>The backend verifies the JWT using the public key provided by JuicyAuth through the /auth/public-key/ endpoint.</li> </ul> <p>This setup allows developers to integrate secure authentication into their web, mobile, or CLI applications with minimal effort, focusing solely on JWT verification in the backend.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>No Passwords: Users authenticate through email OTP, eliminating the need for traditional passwords.</li> <li>Easy Integration: Minimal code required to connect JuicyAuth to your frontend and backend.</li> <li>Secure: Uses RS256 algorithm for JWT verification to ensure high-level security.</li> <li>Flexible: Works with any platform, including web and mobile apps, without needing embedded webviews.</li> </ul>"},{"location":"roadmap/","title":"Roadmap","text":""},{"location":"roadmap/#email-personalization","title":"Email Personalization","text":"<p>We plan to introduce the ability for developers to customize the content of the OTP email sent to users. This will allow for better branding and communication, including the ability to adjust the email's subject, body text, and design elements.</p>"},{"location":"roadmap/#language-support","title":"Language Support","text":"<p>JuicyAuth will offer multi-language support for OTP emails. Developers will be able to choose from a list of supported languages, with translations provided and verified by us. This feature aims to improve the user experience for global applications.</p>"},{"location":"roadmap/#usage-statistics","title":"Usage Statistics","text":"<p>We plan to implement a statistics dashboard, allowing developers to view detailed data about authentication activities. Key metrics like the number of sent OTPs, successful logins, and error rates will be available, helping developers optimize their authentication workflows.</p>"},{"location":"roadmap/#customizable-login-screens-for-popular-frameworks","title":"Customizable Login Screens for Popular Frameworks","text":"<p>We aim to develop libraries for popular frontend frameworks, such as React, Next.js, Vue.js, and Angular. These libraries will provide customizable login screens that developers can easily integrate into their applications, offering flexibility in design and user experience.</p>"},{"location":"api/","title":"API Overview","text":"<p>JuicyAuth provides a set of secure endpoints for OTP-based authentication. These APIs are designed to integrate seamlessly with your backend services.</p> <p>The authentication process involves:</p> <ol> <li>Sending an OTP (One-Time Password) to the user's email.</li> <li>Verifying the OTP to authenticate the user.</li> <li>Retrieving the public key for JWT verification (backend only).</li> </ol> <p>Follow the individual sections to understand how to use each endpoint effectively.</p>"},{"location":"api/public-key/","title":"Get Public Key","text":"<p>Endpoint: <code>GET https://api.juicyauth.dev/auth/public-key/</code></p> <p>This endpoint is used by the backend to retrieve the public key used for verifying JWTs (JSON Web Tokens) issued by JuicyAuth.</p>"},{"location":"api/public-key/#response","title":"Response","text":"<ul> <li><code>200 OK</code>: A string containing the public key in PEM format.</li> </ul>"},{"location":"api/public-key/#example-request","title":"Example Request","text":"<pre><code>curl -X GET \"https://api.juicyauth.com/auth/public-key/\"\n</code></pre>"},{"location":"api/send-otp/","title":"Send OTP","text":"<p>Endpoint: <code>POST https://api.juicyauth.dev/auth/send-otp/</code></p> <p>This endpoint is used by the frontend to send a one-time password (OTP) to the user's email address. The OTP is used for user authentication.</p>"},{"location":"api/send-otp/#request-body","title":"Request Body","text":"<pre><code>{\n  \"email\": \"user@example.com\",\n  \"app_id\": \"your_app_id\"\n}\n</code></pre> <ul> <li><code>email</code>: The email address where the OTP will be sent.</li> <li><code>app_id</code>: The application\u2019s unique identifier.</li> </ul>"},{"location":"api/send-otp/#response","title":"Response","text":"<ul> <li><code>200 OK</code>: OTP successfully sent.</li> <li><code>422 Unprocessable Entity</code>: Invalid input (e.g., missing email or app_id).</li> </ul>"},{"location":"api/send-otp/#example-request","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.juicyauth.com/auth/send-otp/\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"email\": \"user@example.com\",\n  \"app_id\": \"your_app_id\"\n}'\n</code></pre>"},{"location":"api/verify-otp/","title":"Verify OTP","text":"<p>Endpoint: <code>POST https://api.juicyauth.dev/auth/verify-otp/</code></p> <p>This endpoint is used by the backend to verify the one-time password (OTP) sent to the user's email.</p>"},{"location":"api/verify-otp/#request-body","title":"Request Body","text":"<pre><code>{\n  \"email\": \"user@example.com\",\n  \"otp\": \"123456\",\n  \"app_id\": \"your_app_id\"\n}\n</code></pre> <ul> <li><code>email</code>: The user's email address.</li> <li><code>otp</code>: The OTP received by the user via email.</li> <li><code>app_id</code>: The application\u2019s unique identifier.</li> </ul>"},{"location":"api/verify-otp/#response","title":"Response","text":"<ul> <li> <p>200 OK: OTP successfully verified.     <pre><code>{\n  \"jwt\": \"\"\n}\n</code></pre></p> </li> <li> <p>400 Bad Request: OTP verification failed or the OTP is invalid.     <pre><code>{\n  \"error_code\": \"otp_verified_failed\",\n  \"error_description\": \"OTP verification failed.\"\n}\n</code></pre></p> </li> <li>422 Unprocessable Entity: Invalid OTP, email, or app ID.</li> </ul>"},{"location":"api/verify-otp/#error-codes-for-bad-request","title":"Error Codes for Bad Request","text":"Error Code Description <code>otp_verified_failed</code> The OTP verification has failed. <code>otp_expired</code> The OTP has expired. <code>user_banned</code> The user has been banned from the app. <code>otp_sent_failed</code> Failed to send OTP email."},{"location":"api/verify-otp/#example-request","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.juicyauth.com/auth/verify-otp/\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"email\": \"user@example.com\",\n  \"otp\": \"123456\",\n  \"app_id\": \"your_app_id\"\n}'\n</code></pre>"},{"location":"gpt-prompts/backend/","title":"Backend","text":""},{"location":"gpt-prompts/backend/#jwt-verification-backend-prompt","title":"JWT Verification Backend Prompt","text":"<p>You can use this prompt in ChatGPT or Gemini to get help with implementing JWT handling in your backend.</p> <p>Prompt:</p> <p>I need help implementing JWT verification in my backend using this API endpoint: <code>GET https://api.juicyauth.dev/auth/public-key/</code> to retrieve the public key used to verify JWTs issued by the JuicyAuth service. The tokens are encoded using the RS256 algorithm.</p> <p>Can you provide an implementation example in [your chosen backend technology]?</p> <p>Also, please give me an example of a public route and a protected route that requires a valid token for access.</p> <p>Important: Remember to replace <code>[your chosen backend technology]</code> with the specific technology you're using (e.g., Node.js, Python/FastAPI).</p>"},{"location":"gpt-prompts/frontend/","title":"Frontend","text":""},{"location":"gpt-prompts/frontend/#otp-authentication-prompt","title":"OTP Authentication Prompt","text":"<p>You can use this prompt in ChatGPT or Gemini to get help with implementing OTP login on your website or mobile app (client-side). </p> <p>Prompt:</p> <p>I need help implementing OTP authentication in my project using these two API endpoints: 1. <code>POST https://api.juicyauth.dev/auth/send-otp/</code> to send an OTP to the user's email (<code>email</code>, <code>app_id</code> required). 2. <code>POST https://api.juicyauth.dev/auth/verify-otp/</code> to verify the OTP (<code>email</code>, <code>otp</code>, <code>app_id</code> required). On success, the response returns a JWT in the format: <code>{\"jwt\": \"your_jwt_token\"}</code>.</p> <p>Can you provide an implementation example in [your chosen technology]?</p> <p>Important: Remember to replace <code>[your chosen technology]</code> with the specific technology you're using (e.g., Flutter, React).</p>"},{"location":"tutorial/python-backend/","title":"Python JWT Verification","text":"<p>This tutorial will guide you through verifying JSON Web Tokens (JWTs) in Python using JuicyAuth's public key. JWTs are used to securely transmit information between parties as a JSON object.</p>"},{"location":"tutorial/python-backend/#step-1-install-required-libraries","title":"Step 1: Install Required Libraries","text":"<p>First, ensure you have the <code>PyJWT</code> library installed:</p> <pre><code>pip install PyJWT requests\n</code></pre>"},{"location":"tutorial/python-backend/#step-2-fetch-the-public-key","title":"Step 2: Fetch the Public Key","text":"<p>To verify a JWT, you need to fetch the public key from the JuicyAuth API. Here's how you can retrieve it:</p> <pre><code>import requests\n\ndef get_public_key():\n    url = \"https://api.juicyauth.com/auth/public-key/\"\n    response = requests.get(url)\n    return response.text\n\n# Example usage\npublic_key = get_public_key()\nprint(public_key)\n</code></pre>"},{"location":"tutorial/python-backend/#step-3-verify-jwt-and-extract-email","title":"Step 3: Verify JWT and Extract Email","text":"<p>Once you have the public key, you can use it to verify the JWT and extract the user's email from the \"sub\" field in the payload:</p> <pre><code>import jwt\n\ndef verify_jwt(token: str, public_key: str) -&gt; str:\n    try:\n        payload = jwt.decode(token, public_key, algorithms=[\"RS256\"])\n        user_id = payload.get(\"sub\")  # Extract the user's id\n        return user_id\n    except jwt.ExpiredSignatureError:\n        raise ValueError(\"Token has expired\")\n    except jwt.InvalidTokenError:\n        raise ValueError(\"Invalid token\")\n\n# Example usage\ntoken = \"your_jwt_token\"\npublic_key = get_public_key()\n\ntry:\n    user_id = verify_jwt(token, public_key)\n    print(\"Token is valid, user id:\", user_id)\nexcept ValueError as e:\n    print(\"Token verification failed:\", str(e))\n</code></pre> <p>This function will decode and validate the JWT, and extract the user's email (which is stored in the \"sub\" field). If the token has expired or is invalid, an appropriate exception will be raised.</p>"},{"location":"tutorial/python-backend/#step-4-using-jwt-verification-in-fastapi","title":"Step 4: Using JWT Verification in FastAPI","text":"<p>To integrate this into a FastAPI application, you can use the verify_jwt function as a dependency in your request handlers. Here's how to extract the JWT from the Authorization header:</p> <pre><code>from fastapi import FastAPI, Depends, HTTPException, Header\n\napp = FastAPI()\n\ndef jwt_dependency(authorization: str = Header(...)):\n    if not authorization.startswith(\"Bearer \"):\n        raise HTTPException(status_code=400, detail=\"Invalid authorization header format\")\n\n    token = authorization.split(\" \")[1]  # Extract the token from the header\n    public_key = get_public_key()\n\n    try:\n        user_id = verify_jwt(token, public_key)\n        return user_id\n    except ValueError as e:\n        raise HTTPException(status_code=401, detail=\"Invalid or expired token\")\n\n@app.get(\"/protected-route/\")\ndef protected_route(user_id: str = Depends(jwt_dependency)):\n    return {\"message\": \"Access granted\", \"user_id\": user_id}\n</code></pre>"},{"location":"tutorial/react-frontend/","title":"React Frontend","text":"<p>in progress</p>"}]}